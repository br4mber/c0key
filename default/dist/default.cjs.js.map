{"version":3,"file":"default.cjs.js","mappings":"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","sources":["webpack://@tkey/default/webpack/bootstrap","webpack://@tkey/default/webpack/runtime/compat get default export","webpack://@tkey/default/webpack/runtime/define property getters","webpack://@tkey/default/webpack/runtime/hasOwnProperty shorthand","webpack://@tkey/default/webpack/runtime/make namespace object","webpack://@tkey/default/external commonjs2 \"@babel/runtime/helpers/asyncToGenerator\"","webpack://@tkey/default/external commonjs2 \"@babel/runtime/helpers/defineProperty\"","webpack://@tkey/default/external commonjs2 \"@babel/runtime/helpers/classCallCheck\"","webpack://@tkey/default/external commonjs2 \"@babel/runtime/helpers/createClass\"","webpack://@tkey/default/external commonjs2 \"@babel/runtime/helpers/get\"","webpack://@tkey/default/external commonjs2 \"@babel/runtime/helpers/inherits\"","webpack://@tkey/default/external commonjs2 \"@babel/runtime/helpers/possibleConstructorReturn\"","webpack://@tkey/default/external commonjs2 \"@babel/runtime/helpers/getPrototypeOf\"","webpack://@tkey/default/external commonjs2 \"@babel/runtime/regenerator\"","webpack://@tkey/default/external commonjs2 \"@tkey/core\"","webpack://@tkey/default/external commonjs2 \"@tkey/service-provider-base\"","webpack://@tkey/default/external commonjs2 \"@tkey/service-provider-torus\"","webpack://@tkey/default/external commonjs2 \"@tkey/share-serialization\"","webpack://@tkey/default/external commonjs2 \"@tkey/share-transfer\"","webpack://@tkey/default/external commonjs2 \"@tkey/storage-layer-torus\"","webpack://@tkey/default/./src/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/asyncToGenerator\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/defineProperty\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/classCallCheck\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/createClass\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/get\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/inherits\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/possibleConstructorReturn\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/helpers/getPrototypeOf\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@babel/runtime/regenerator\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@tkey/core\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@tkey/service-provider-base\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@tkey/service-provider-torus\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@tkey/share-serialization\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@tkey/share-transfer\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@tkey/storage-layer-torus\");","import { IServiceProvider, IStorageLayer, StringifiedType, TKeyArgs } from \"@tkey/common-types\";\nimport TKey from \"@tkey/core\";\nimport { ServiceProviderBase } from \"@tkey/service-provider-base\";\nimport { TorusServiceProvider } from \"@tkey/service-provider-torus\";\nimport { SHARE_SERIALIZATION_MODULE_NAME, ShareSerializationModule } from \"@tkey/share-serialization\";\nimport { SHARE_TRANSFER_MODULE_NAME, ShareTransferModule } from \"@tkey/share-transfer\";\nimport { MockStorageLayer, TorusStorageLayer } from \"@tkey/storage-layer-torus\";\n\nclass ThresholdKey extends TKey {\n  constructor(args?: TKeyArgs) {\n    const { modules = {}, serviceProvider, storageLayer, customAuthArgs, serverTimeOffset } = args || {};\n    const defaultModules = {\n      [SHARE_TRANSFER_MODULE_NAME]: new ShareTransferModule(),\n      [SHARE_SERIALIZATION_MODULE_NAME]: new ShareSerializationModule(),\n    };\n    let finalServiceProvider: IServiceProvider;\n    let finalStorageLayer: IStorageLayer;\n    if (!serviceProvider) {\n      finalServiceProvider = new TorusServiceProvider({ customAuthArgs });\n    } else {\n      finalServiceProvider = serviceProvider;\n    }\n    if (!storageLayer) {\n      finalStorageLayer = new TorusStorageLayer({ hostUrl: \"https://metadata.tor.us\", serverTimeOffset });\n    } else {\n      finalStorageLayer = storageLayer;\n    }\n    super({ ...(args || {}), modules: { ...defaultModules, ...modules }, serviceProvider: finalServiceProvider, storageLayer: finalStorageLayer });\n  }\n\n  static async fromJSON(value: StringifiedType, args?: TKeyArgs): Promise<ThresholdKey> {\n    const { storageLayer: tempOldStorageLayer, serviceProvider: tempOldServiceProvider } = value;\n    const { storageLayer, serviceProvider, modules = {}, customAuthArgs, serverTimeOffset = 0 } = args || {};\n    const defaultModules = {\n      [SHARE_TRANSFER_MODULE_NAME]: new ShareTransferModule(),\n      [SHARE_SERIALIZATION_MODULE_NAME]: new ShareSerializationModule(),\n    };\n\n    const finalServiceProvider: IServiceProvider =\n      serviceProvider ||\n      TorusServiceProvider.fromJSON(tempOldServiceProvider) ||\n      ServiceProviderBase.fromJSON(tempOldServiceProvider) ||\n      new TorusServiceProvider({ customAuthArgs });\n\n    tempOldStorageLayer.serviceProvider = finalServiceProvider;\n    const finalStorageLayer: IStorageLayer =\n      storageLayer ||\n      MockStorageLayer.fromJSON(tempOldStorageLayer) ||\n      TorusStorageLayer.fromJSON(tempOldStorageLayer) ||\n      new TorusStorageLayer({ hostUrl: \"https://metadata.tor.us\", serverTimeOffset });\n\n    return super.fromJSON(value, {\n      ...(args || {}),\n      modules: { ...defaultModules, ...modules },\n      serviceProvider: finalServiceProvider,\n      storageLayer: finalStorageLayer,\n    });\n  }\n}\n\nexport default ThresholdKey;\n"],"names":["TKey","ServiceProviderBase","TorusServiceProvider","SHARE_SERIALIZATION_MODULE_NAME","ShareSerializationModule","SHARE_TRANSFER_MODULE_NAME","ShareTransferModule","MockStorageLayer","TorusStorageLayer","ThresholdKey","args","modules","serviceProvider","storageLayer","customAuthArgs","serverTimeOffset","defaultModules","finalServiceProvider","finalStorageLayer","hostUrl","value","tempOldStorageLayer","tempOldServiceProvider","fromJSON"],"sourceRoot":""}